# Recommendations

> Prioritized solutions for identified challenges, with rationale and trade-offs.

---

## Priority Levels

| Level | Meaning | Typical Effort |
|-------|---------|----------------|
| ðŸŸ¢ P1 | Do first - high impact, low effort | < 1 hour |
| ðŸŸ¡ P2 | Do soon - important for long-term health | 1-4 hours |
| ðŸ”´ P3 | Plan for - requires more investment | 4+ hours |

---

## ðŸŸ¢ P1: Quick Wins

### R1. Enhance `.source` Files with Commit SHA

**Problem Solved**: Cannot detect if upstream skills have changed.

**Change**: Modify `fetch-skill.sh` to record the commit SHA.

**Current Format**:
```
source: https://github.com/obra/superpowers/tree/main/skills/brainstorming
fetched: 2026-01-07T00:17:35Z
```

**Proposed Format**:
```yaml
source: https://github.com/obra/superpowers/tree/main/skills/brainstorming
fetched: 2026-01-07T00:17:35Z
commit_sha: a1b2c3d4e5f6789...
branch: main
raw_base: https://raw.githubusercontent.com/obra/superpowers/main/skills/brainstorming
```

**Why This Works**:
- GitHub API can query latest commit SHA for a path
- Compare stored SHA vs current to detect changes
- Enables selective re-fetching (only changed skills)

**Effort**: ~30 minutes  
**Impact**: High (enables all freshness detection)

---

### R2. Create Repository Metadata File

**Problem Solved**: No tracking for core documentation sync state.

**Change**: Create `.repo-metadata.json` at repository root.

**Proposed Content**:
```json
{
  "documentation": {
    "source": "https://code.claude.com/docs",
    "llms_txt_url": "https://code.claude.com/docs/llms.txt",
    "last_synced": "2026-01-06T00:00:00Z",
    "sync_method": "manual"
  },
  "skills": {
    "last_bulk_update": "2026-01-07T00:17:35Z",
    "total_core": 28,
    "total_extended": 4,
    "placeholders": 2
  },
  "generated": {
    "timestamp": "2026-01-07T00:00:00Z",
    "by": "generate-metadata.sh"
  }
}
```

**Why This Works**:
- Single source of truth for sync state
- Can be auto-generated by scripts
- README.md can reference this instead of hardcoding

**Effort**: ~15 minutes  
**Impact**: Medium (foundation for other automation)

---

### R3. Create Auto-Generated Stats Script

**Problem Solved**: Manual stat updates in README.md and CATALOG.md.

**Change**: Create `tools/generate-stats.sh`.

**Script Purpose**:
- Count documentation files
- Count skills (working vs placeholder)
- Count line numbers for each skill
- Output in machine-readable format (JSON)

**Example Output**:
```json
{
  "doc_files": 49,
  "skill_files": 34,
  "working_skills": 32,
  "placeholder_skills": 2,
  "skills": [
    {"name": "brainstorming", "lines": 54, "path": "core-skills/obra-workflow/brainstorming"}
  ]
}
```

**Effort**: ~45 minutes  
**Impact**: Medium (reduces manual work)

---

### R4. Add CHANGELOG.md

**Problem Solved**: No record of what changed between updates.

**Change**: Create `CHANGELOG.md` at repository root.

**Format** (Keep a Changelog style):
```markdown
# Changelog

All notable changes to this repository will be documented in this file.

## [Unreleased]

## [1.0.0] - 2026-01-07
### Added
- Initial release with 49 documentation files
- 32 working skills (28 core + 4 extended)
- Deployment tools and validation scripts

### Sources
- Documentation from code.claude.com as of 2026-01-06
- Skills from obra, anthropics, fvadicamo, zxkane
```

**Effort**: ~15 minutes  
**Impact**: Medium (improves communication)

---

## ðŸŸ¡ P2: Important Improvements

### R5. Create Freshness Report Tool

**Problem Solved**: Cannot tell which skills have upstream updates.

**Change**: Create `tools/freshness-report.sh`.

**Functionality**:
1. Read each `.source` file
2. Query GitHub API for latest commit SHA for that path
3. Compare with stored SHA
4. Report: up-to-date / stale / unknown

**Example Output**:
```
Freshness Report - 2026-01-07
==============================
âœ… brainstorming - up to date (a1b2c3d)
âš ï¸  writing-plans - STALE (local: a1b2c3d, remote: f5e6d7c)
â“ changelog-generator - could not check (placeholder)

Summary: 30 up-to-date, 2 stale, 2 unknown
```

**Prerequisites**: R1 (commit SHA tracking)

**Effort**: ~2 hours  
**Impact**: High (answers "what needs updating?")

---

### R6. Create Catalog Auto-Generation

**Problem Solved**: Manual CATALOG.md updates.

**Change**: Create `tools/regenerate-catalog.sh`.

**Functionality**:
1. Scan all skill directories
2. Extract name, description from YAML frontmatter
3. Count lines
4. Check for `.source` file
5. Generate markdown table

**Example**:
```bash
./regenerate-catalog.sh > ../CATALOG.md
```

**Effort**: ~2 hours  
**Impact**: Medium (enables hands-off catalog maintenance)

---

### R7. Add Link Health Checker

**Problem Solved**: Dead links in community-catalog.md and other docs.

**Change**: Create `tools/check-links.sh`.

**Functionality**:
1. Extract all URLs from markdown files
2. HEAD request to each
3. Report: alive / redirect / dead

**Scope**: Start with `reference/community-catalog.md`, expand to all files.

**Effort**: ~1.5 hours  
**Impact**: Medium (prevents user frustration with dead links)

---

### R8. Create CONTRIBUTING.md

**Problem Solved**: No guidance for contributors.

**Change**: Create `CONTRIBUTING.md` in repository root.

**Content**:
- How to add new skills
- How to update existing skills
- How to report issues
- How to sync core documentation
- PR requirements

**Effort**: ~30 minutes  
**Impact**: Low-Medium (helps future contributors)

---

## ðŸ”´ P3: Long-Term Investments

### R9. Add GitHub Actions Workflow

**Problem Solved**: No automated validation or freshness checks.

**Change**: Create `.github/workflows/maintenance.yml`.

**Jobs**:
1. `validate-skills`: Run validation on all skills
2. `check-links`: Check for dead links
3. `freshness-report`: Generate freshness report (weekly)

**Triggers**:
- On PR: validate-skills, check-links
- Weekly schedule: freshness-report

**Prerequisites**: R5, R7 (tools must exist first)

**Effort**: ~3 hours  
**Impact**: High (catches issues automatically)

---

### R10. Implement Core Documentation Sync

**Problem Solved**: No way to update core docs from upstream.

**Change**: Create `tools/sync-docs.sh`.

**Functionality**:
1. Fetch latest `llms.txt` from Anthropic
2. Compare with local `llms.txt`
3. Report new/removed/changed pages
4. Optionally download updates

**Challenges**:
- Anthropic may not have public raw access to docs
- Format may change
- Need to handle new custom components

**Alternative**: Manual sync with documented process.

**Effort**: ~4+ hours  
**Impact**: Medium (core docs sync is less frequent)

---

### R11. Consider Restructuring Directories

**Problem Solved**: Numbered folders are inflexible.

**Current**: `01-getting-started/`, `02-core-features/`, etc.

**Issue**: Adding a new category means renumbering.

**Options**:
1. **Keep as-is**: Numbers provide clear order, renumbering is rare
2. **Remove numbers**: `getting-started/`, `core-features/`, etc.
3. **Hybrid**: Top-level `docs/` and `skills/` folders

**Recommendation**: Keep as-is unless major restructure is needed. The numbered system matches Anthropic's conceptual organization.

**Effort**: ~2 hours (just rename) to ~1 day (update all references)  
**Impact**: Low (current structure works)

---

## Implementation Order

For maximum value with minimum effort, implement in this order:

```
Phase 1 (Day 1):
â”œâ”€â”€ R4: CHANGELOG.md             (15 min)
â”œâ”€â”€ R2: .repo-metadata.json      (15 min)
â”œâ”€â”€ R1: Enhance .source files    (30 min)
â””â”€â”€ R3: generate-stats.sh        (45 min)

Phase 2 (Day 2-3):
â”œâ”€â”€ R8: CONTRIBUTING.md          (30 min)
â”œâ”€â”€ R5: freshness-report.sh      (2 hours)
â””â”€â”€ R6: regenerate-catalog.sh    (2 hours)

Phase 3 (Week 2):
â”œâ”€â”€ R7: check-links.sh           (1.5 hours)
â””â”€â”€ R9: GitHub Actions           (3 hours)

Phase 4 (As needed):
â”œâ”€â”€ R10: sync-docs.sh            (4+ hours)
â””â”€â”€ R11: Directory restructure   (if desired)
```

---

## Trade-offs and Alternatives

### Alternative A: Minimal Maintenance

If ongoing maintenance is not a priority:
- Just add CHANGELOG.md (R4)
- Document that this is a point-in-time snapshot
- Accept that content may become stale

**Pros**: Near-zero ongoing effort  
**Cons**: Decreasing value over time

### Alternative B: Full Automation

Go all-in on automation:
- GitHub Actions for everything
- Auto-create PRs when upstream changes
- Auto-merge non-breaking updates

**Pros**: Truly hands-off  
**Cons**: High initial investment, may break on upstream changes

### Alternative C: Recommended Balance

Implement P1 + P2 recommendations:
- Good tracking and detection
- Manual review and update
- Low maintenance burden

**Pros**: Sustainable, catches issues early  
**Cons**: Some manual work remains

---

## Decision Points for Human Review

Before implementing, consider:

1. **How often will you update this repo?**
   - Rarely â†’ Alternative A
   - Monthly â†’ Alternative C (recommended)
   - Continuously â†’ Alternative B

2. **Who is the audience?**
   - Just you â†’ Lighter tooling acceptable
   - Team/public â†’ More automation worthwhile

3. **Is core doc freshness critical?**
   - Yes â†’ Prioritize R10
   - No â†’ Focus on skills infrastructure

---

## Next Steps

See [04-implementation-specs.md](04-implementation-specs.md) for detailed technical specifications for each recommendation.

